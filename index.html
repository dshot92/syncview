<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="Synchronized dual-map viewer for comparing locations and distances">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Sync View">
    <meta property="og:description" content="Synchronized dual-map viewer for comparing locations and distances">
    <meta property="og:image" content="https://dshot92.github.io/syncview/images/preview.webp">
    <meta property="og:image:secure_url" content="https://dshot92.github.io/syncview/images/preview.webp">
    <meta property="og:image:type" content="image/webp">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Sync View">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Sync View">
    <meta name="twitter:description" content="Synchronized dual-map viewer for comparing locations and distances">
    <meta name="twitter:image" content="https://dshot92.github.io/syncview/images/preview.webp">
    <meta name="twitter:image:alt" content="Sync View preview">
    <meta name="theme-color" content="#020617">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Sync View">
    <title>Sync View</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="images/icon.svg">
    <link rel="apple-touch-icon" href="images/icon.svg">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="app-container">
        <div class="map-wrapper" id="map1-wrapper">
            <div id="map1" class="map-instance"></div>
            <div class="overlay-ui">
                <div class="hud-stack">
                    <div class="hud-card" id="card1">
                        <div id="stats1" class="stats-val">---</div>
                        <div id="diff1" class="stats-diff"></div>
                    </div>
                </div>
                <div class="toolbar-container">
                    <div class="search-wrapper">
                        <div class="search-control" id="search-ctrl1">
                            <button class="search-btn-inner" onclick="toggleSearch(1)">
                                <img src="images/svgs/search.svg" alt="">
                            </button>
                            <input type="text" class="search-input" id="search-in1" placeholder="Search world..."
                                oninput="debouncedSearch(event, 1)" autocomplete="off" autocorrect="off"
                                autocapitalize="off" spellcheck="false">
                        </div>
                        <div id="results1" class="search-results">
                            <div id="status-searching1" class="result-item search-status searching hidden">Searching...
                            </div>
                            <div id="status-none1" class="result-item search-status hidden">No results found</div>
                            <div id="status-error1" class="result-item search-status error hidden">Search error. Check
                                connection.</div>
                            <div id="results-list1" class="results-list"></div>
                        </div>
                    </div>
                    <button class="tool-btn" id="locate-btn1" onclick="locateDevice(1)">
                        <img src="images/svgs/device-position.svg" alt="">
                    </button>
                    <button id="center-btn1" class="tool-btn hidden" onclick="centerShapes()">
                        <img src="images/svgs/center.svg" alt="">
                    </button>
                    <button id="back1" class="tool-btn hidden" onclick="AppState.removeLast()">
                        <img src="images/svgs/back.svg" alt="">
                    </button>
                    <button id="clear1" class="tool-btn danger hidden" onclick="AppState.clear()">
                        <img src="images/svgs/clear.svg" alt="">
                    </button>
                </div>
            </div>
        </div>

        <div class="map-wrapper" id="map2-wrapper">
            <div id="map2" class="map-instance"></div>
            <div class="overlay-ui">
                <div class="hud-stack">
                    <div class="hud-card" id="card2">
                        <div id="stats2" class="stats-val">---</div>
                        <div id="diff2" class="stats-diff"></div>
                    </div>
                </div>
                <div class="toolbar-container">
                    <div class="search-wrapper">
                        <div class="search-control" id="search-ctrl2">
                            <button class="search-btn-inner" onclick="toggleSearch(2)">
                                <img src="images/svgs/search.svg" alt="">
                            </button>
                            <input type="text" class="search-input" id="search-in2" placeholder="Search world..."
                                oninput="debouncedSearch(event, 2)" autocomplete="off" autocorrect="off"
                                autocapitalize="off" spellcheck="false">
                        </div>
                        <div id="results2" class="search-results">
                            <div id="status-searching2" class="result-item search-status searching hidden">Searching...
                            </div>
                            <div id="status-none2" class="result-item search-status hidden">No results found</div>
                            <div id="status-error2" class="result-item search-status error hidden">Search error. Check
                                connection.</div>
                            <div id="results-list2" class="results-list"></div>
                        </div>
                    </div>
                    <button class="tool-btn" id="locate-btn2" onclick="locateDevice(2)">
                        <img src="images/svgs/device-position.svg" alt="">
                    </button>
                    <button id="center-btn2" class="tool-btn hidden" onclick="centerShapes()">
                        <img src="images/svgs/center.svg" alt="">
                    </button>
                    <button id="back2" class="tool-btn hidden" onclick="AppState.removeLast()">
                        <img src="images/svgs/back.svg" alt="">
                    </button>
                    <button id="clear2" class="tool-btn danger hidden" onclick="AppState.clear()">
                        <img src="images/svgs/clear.svg" alt="">
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="global-bar">
        <button class="bar-btn" onclick="toggleModal('settings-modal', true)">
            <img src="images/svgs/settings.svg" alt="">
        </button>

        <div class="dropdown-container">
            <button class="bar-btn" id="layerBtn" onclick="toggleLayerMenu()">
                <img src="images/svgs/layers.svg" alt="">
            </button>
            <div class="dropdown-menu" id="layerMenu" data-active="hybrid">
                <div class="dropdown-highlight"></div>
                <div data-layer="hybrid" class="dropdown-item active" onclick="AppState.setLayer('hybrid')">Hybrid</div>
                <div data-layer="satellite" class="dropdown-item" onclick="AppState.setLayer('satellite')">Satellite
                </div>
                <div data-layer="streets" class="dropdown-item" onclick="AppState.setLayer('streets')">Streets</div>
            </div>
        </div>

        <div class="pill-group" id="mode-group" data-mode="line">
            <div class="pill-bg"></div>
            <button id="btnLine" class="pill active" onclick="AppState.setMode('line')">Line</button>
            <button id="btnArea" class="pill" onclick="AppState.setMode('area')">Area</button>
        </div>

        <button class="bar-btn" onclick="shareCurrentView()">
            <img src="images/svgs/share.svg" alt="">
        </button>

        <button class="bar-btn center-btn" onclick="centerShapes()">
            <img src="images/svgs/center.svg" alt="">
        </button>

        <button class="bar-btn" onclick="toggleModal('info-modal', true)">
            <img src="images/svgs/info.svg" alt="">
        </button>
    </div>

    <div id="settings-modal" class="modal-overlay" onclick="toggleModal('settings-modal', false)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="tool-btn" onclick="toggleModal('settings-modal', false)">×</button>
            </div>
            <div class="setting-row" onclick="AppState.toggleUnits()">
                <span>Measurement Units</span>
                <span id="val-units" class="setting-value">Metric</span>
            </div>
            <div class="setting-row" onclick="AppState.toggleVertexNumbers()">
                <span>Show Point Numbers</span>
                <span id="val-vertex" class="setting-value">Off</span>
            </div>
            <div class="setting-row" onclick="AppState.toggleBoundingBox()">
                <span>Show Bounding Box</span>
                <span id="val-bbox" class="setting-value">Off</span>
            </div>
        </div>
    </div>

    <div id="info-modal" class="modal-overlay" onclick="toggleModal('info-modal', false)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2>Sync View</h2>
                <button class="tool-btn" onclick="toggleModal('info-modal', false)">×</button>
            </div>
            <p class="info-intro">
                Sync View is a dual-map comparison tool for measuring distances and areas between locations.
            </p>

            <div class="btn-link-group">
                <a href="https://github.com/dshot92/syncview" target="_blank" class="btn-link">
                    <img src="images/svgs/github.svg" alt="">
                    Sync View
                </a>
                <a href="https://github.com/dshot92" target="_blank" class="btn-link">
                    <img src="images/svgs/github.svg" alt="">
                    dshot92
                </a>
            </div>

            <h3 class="shortcut-title">Keyboard Shortcuts</h3>
            <div class="shortcut-grid">
                <div class="shortcut-item"><span class="key">L</span> <span>Line mode</span></div>
                <div class="shortcut-item"><span class="key">A</span> <span>Area mode</span></div>
                <div class="shortcut-item"><span class="key">U</span> <span>Toggle units</span></div>
                <div class="shortcut-item"><span class="key">V</span> <span>Vertex numbers</span></div>
                <div class="shortcut-item"><span class="key">B</span> <span>Bounding box</span></div>
                <div class="shortcut-item"><span class="key">Del</span> <span>Remove last point</span></div>
                <div class="shortcut-item"><span class="key">Z</span> <span>Undo (Ctrl+Z)</span></div>
                <div class="shortcut-item"><span class="key">Esc</span> <span>Close / Clear</span></div>
            </div>
        </div>
    </div>

    <div id="share-modal" class="modal-overlay" onclick="toggleModal('share-modal', false)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2>Share</h2>
                <button class="tool-btn" onclick="toggleModal('share-modal', false)">×</button>
            </div>

            <div class="share-qr-container">
                <div id="qr-loading" class="qr-status loading hidden">GENERATING QR...</div>
                <div id="qr-error" class="qr-status error hidden">QR Error</div>
                <div id="qrcode"></div>
            </div>

            <div id="share-url" class="share-url-display"></div>

            <button class="btn-primary" id="btn-copy-link">
                <img src="images/svgs/copy.svg" alt="">
                <span>Copy Link</span>
            </button>
        </div>
    </div>

    <div id="magnifier"></div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="main.js"></script>
</body>

</html>
